<div class="container mt-4">
  <!-- Encabezado -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="text-primary">
      <i class="bi bi-person-badge me-2"></i> Gesti√≥n de Empleados
    </h2>
    <button class="btn btn-success me-2" (click)="nuevoEmpleado()">
      <i class="bi bi-person-plus me-2"></i> Nuevo Empleado
    </button>
  </div>

  <!-- üîé Buscador -->
  <div class="mb-3">
    <input type="text"
           class="form-control"
           placeholder="Buscar por nombre, apellido o DNI..."
           [(ngModel)]="searchTerm"
           (input)="goToPage(1)">
  </div>

  <!-- üìã Grid de Cards (m√≥vil) -->
  <div class="row g-3 d-block d-md-none">
    <div class="col-12" *ngFor="let emp of paginatedEmpleados; trackBy: trackById">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-light d-flex justify-content-between align-items-start">
          <div>
            <h5 class="mb-1 text-primary">ID: {{ emp.id }}</h5>
            <p class="mb-1 text-muted small">
              <i class="bi bi-person me-1"></i> {{ emp.nombre }} {{ emp.apellido }}
            </p>
            <p class="mb-0">
              <strong>Cargo:</strong> {{ emp.cargo }}
            </p>
          </div>
          <div class="btn-group flex-shrink-0" role="group">
            <button type="button" class="btn btn-sm btn-outline-warning" (click)="editarEmpleado(emp.id!)"><i class="bi bi-pencil-square"></i></button>
            <button type="button" class="btn btn-sm btn-outline-danger" (click)="confirmDelete(emp)"><i class="bi bi-trash"></i></button>
          </div>
        </div>
        <div class="card-body">
          <div class="mb-3">
            <h6 class="text-secondary mb-2">DNI</h6>
            <p class="mb-0">{{ emp.dni }}</p>
          </div>
          <div class="mb-3">
            <h6 class="text-secondary mb-2">Tel√©fono</h6>
            <p class="mb-0">{{ emp.telefono }}</p>
          </div>
          <div class="mb-3">
            <h6 class="text-secondary mb-2">Estado</h6>
            <div class="form-check form-switch">
              <input 
                class="form-check-input" 
                type="checkbox" 
                [checked]="emp.estado === 'Activo'" 
                (change)="toggleEstado(emp, $event)">
              <label class="form-check-label">
                {{ emp.estado === 'Activo' ? 'Activo' : 'Inactivo' }}
              </label>
            </div>
          </div>
          <div class="mb-3">
            <h6 class="text-secondary mb-2">Usuario</h6>
            <span class="badge bg-info">
              <i class="bi bi-person-circle me-1"></i> {{ emp.usuarioId }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- üìä Tabla (desktop) -->
  <div class="table-responsive shadow-sm rounded d-none d-md-block">
    <table class="table table-hover align-middle">
      <thead class="table-primary">
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>DNI</th>
          <th>Cargo</th>
          <th>Tel√©fono</th>
          <th>Estado</th>
          <th>Usuario</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let emp of paginatedEmpleados; trackBy: trackById">
          <td>{{ emp.id }}</td>
          <td>{{ emp.nombre }}</td>
          <td>{{ emp.apellido }}</td>
          <td>{{ emp.dni }}</td>
          <td>{{ emp.cargo }}</td>
          <td>{{ emp.telefono }}</td>
          <td>
            <div class="form-check form-switch">
              <input 
                class="form-check-input" 
                type="checkbox" 
                [checked]="emp.estado === 'Activo'" 
                (change)="toggleEstado(emp, $event)">
              <label class="form-check-label">
                {{ emp.estado === 'Activo' ? 'Activo' : 'Inactivo' }}
              </label>
            </div>
          </td>
          <td>
            <span class="badge bg-info">
              <i class="bi bi-person-circle me-1"></i> {{ emp.usuarioId }}
            </span>
          </td>
          <td>
            <button class="btn btn-sm btn-warning me-2" (click)="editarEmpleado(emp.id!)">
              <i class="bi bi-pencil-square"></i>
            </button>
            <button class="btn btn-sm btn-danger" (click)="confirmDelete(emp)">
              <i class="bi bi-trash"></i>
            </button>
          </td>
        </tr>
        <tr *ngIf="filteredEmpleados.length === 0">
          <td colspan="9" class="text-center text-muted">No se encontraron resultados</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- üìÑ Paginaci√≥n (estilo como en la imagen) -->
  <div class="d-flex justify-content-center mt-4">
    <nav>
      <ul class="pagination">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <button class="page-link" (click)="prevPage()">Anterior</button>
        </li>
        <li class="page-item" *ngFor="let page of getPageNumbers(); trackBy: trackByPage" [class.active]="page === currentPage">
          <button class="page-link" (click)="goToPage(page)">{{ page }}</button>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <button class="page-link" (click)="nextPage()">Siguiente</button>
        </li>
      </ul>
    </nav>
  </div>
</div>