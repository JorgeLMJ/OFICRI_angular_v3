<div class="flex h-screen bg-gray-50">

  <aside 
    class="bg-blue-700 text-white w-64 transition-all duration-300 ease-in-out z-50 fixed inset-y-0 left-0 transform"
    [class]="innerWidth >= 992 ? (isMenuOpen ? 'translate-x-0' : '-translate-x-full') : (isMobileMenuOpen ? 'translate-x-0' : '-translate-x-full')">

    <div class="p-4 border-b border-blue-600">
      <a routerLink="/dashboard" class="flex items-center text-white no-underline">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="currentColor"/>
          <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="ml-2 font-bold">Dosaje y Toxicología</span>
      </a>
    </div>

    <hr class="border-blue-600 my-2">

    <ul class="px-4 py-2 space-y-1">
      <li *ngFor="let item of filteredMenuItems" class="mb-1">
        <a 
          [routerLink]="item.route"
          routerLinkActive="bg-blue-600 text-white"
          class="flex items-center p-2 rounded-md text-white hover:bg-blue-600 transition-colors duration-200">
          <i class="bi me-2 fs-5" [ngClass]="item.icon"></i>
          <span>{{ item.title }}</span>
        </a>
      </li>
    </ul>

    <div class="absolute bottom-0 w-full p-4">
      <button 
        class="w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-md flex items-center justify-center transition-colors duration-200"
        (click)="logout()">
        <i class="bi bi-box-arrow-right me-2 fs-5"></i>
        <strong>Cerrar Sesión</strong>
      </button>
    </div>

  </aside>

  <main class="flex-1 flex flex-col h-screen overflow-hidden transition-all duration-300 ease-in-out ml-0" 
        [class]="innerWidth >= 992 ? (isMenuOpen ? 'ml-64' : 'ml-0') : 'ml-0'">

    <nav class="bg-blue-700 text-white shadow-sm px-4 py-3 flex items-center justify-between z-40 flex-shrink-0">
      <button 
        class="text-white p-2 rounded-md hover:bg-blue-600 transition-colors duration-200"
        (click)="toggleMenu()">
        <i class="bi bi-list text-xl"></i>
      </button>

      <div class="flex items-center space-x-4">
        <a class="relative p-2 rounded-md hover:bg-blue-600 transition-colors duration-200" routerLink="/dashboard/notificaciones">
          <i class="bi bi-bell text-xl"></i>
          <span class="absolute top-0 right-0 inline-flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-600 rounded-full"
                *ngIf="unreadCount > 0">
            {{ unreadCount }}
          </span>
        </a>

        <div class="flex items-center space-x-2">
          <i class="bi bi-person-circle text-xl"></i>
          <span>Bienvenido, {{ userName }}</span>
        </div>
      </div>
    </nav>

    <div class="flex-1 overflow-y-auto p-4 bg-gray-50">
      <router-outlet></router-outlet>
    </div>

  </main>

</div>

<div class="offcanvas offcanvas-start bg-blue-700 text-white" tabindex="-1" id="offcanvasMenu" aria-labelledby="offcanvasMenuLabel">
  <div class="offcanvas-header border-b border-white/30">
    <h5 class="offcanvas-title text-center text-xl font-bold" id="offcanvasMenuLabel">Menú</h5>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body p-0">
    <ul class="nav flex-column">
      <li class="nav-item mb-2" *ngFor="let item of filteredMenuItems">
        <a 
          class="nav-link text-white text-center text-lg py-3 border-b border-white/20 hover:bg-blue-600 transition-colors duration-200"
          [routerLink]="item.route"
          data-bs-dismiss="offcanvas">
          <i class="bi me-2" [ngClass]="item.icon"></i> {{ item.title }}
        </a>
      </li>
      <li class="nav-item mt-4">
        <button 
          class="btn btn-danger w-100 text-center text-lg py-3 border border-white/30 hover:bg-red-700 transition-colors duration-200"
          (click)="logout()" 
          data-bs-dismiss="offcanvas">
          <i class="bi bi-box-arrow-right me-2"></i> Cerrar Sesión
        </button>
      </li>
    </ul>
  </div>
</div>